<style>
    * { 
        background-color:#202225; 
        color:#959ca6; 
        border:1px solid #40444b; 
        border-radius:5px; 
    }
</style>

<script src="https://unpkg.com/json5@2/dist/index.min.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"></script>

<select id="SelectVersion">
    <option disabled selected>Select a version</option>
</select>

<hr>

<select id="TCZList" style="width:15vw;height:100%" size="2"></select>

<script>
    $(document).ready(function(){

        $('#SelectVersion').change(function(){
            var selectedOption = $('#SelectVersion option:selected');
            var selectedOptgroup = selectedOption.closest('optgroup').attr('label');
            var selectedValue = selectedOption.val();

            fetch(`data/${selectedOptgroup}/${selectedValue}/tczlist`)
                .then(response => response.text())
                .then(text => {
                    $('#TCZList').empty(); 
                    text.split('\n').forEach(line => {
                        $('#TCZList').append($('<option>', { text: line }));
                    });
                });
        });

        fetch('site-data/versions.json')
            .then(response => response.text())
            .then(text => JSON5.parse(text))
            .then(data => {
                $.each(data, (version, values) => {
                    $('#SelectVersion').append(
                        $('<optgroup>', { label: version }).append(
                            values.map(value => $('<option>', { value, text: value }))
                        )
                    );
                });
            });
    });
</script>
